<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Calculator</title>
        <link href="style.css" rel="style">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    </head>

    <body style="background-color: rgb(30, 235, 112);">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
        
        <div class="container" style="margin-top: 50px;">
        <div class="card position-absolute top-50 start-50 translate-middle bg-light" style="width: 300px; height: 500px;">
            <div class="container">
                <div style="height: 50%;">
                    <p>Calculator</p>

                    <br><br>
                    <p id="calculation-text" style="text-align: right;">
                        
                    </p>

                    <div class="row row-cols-2 row-cols-lg-2 g-2 g-lg-3">
                        <div class="col">
                            <p>
                                =
                            </p>
                        </div>

                        <h3 id="result-text" style="text-align: right;">
                            
                        </h3>
                    </div>
                </div>
                

                <div class="row row-cols-2 row-cols-lg-2 g-2 g-lg-3 bg-white ">

                    <div class="col-8">
                        <div class="btn-group" role="group" aria-label="Basic example" style="width: 75%;">
                            <button id="reset-btn" type="button" class="btn btn-light ">AC</button>
                            <button id="delete-btn" type="button" class="btn btn-light">DEL</button>
                            <button id="percent-btn" type="button" class="btn btn-light">%</button>
                        </div>
                        <div class="btn-group" role="group" aria-label="Basic example" style="width: 75%;">
                            <button id="7-btn" type="button" class="btn btn-white">7</button>
                            <button id="8-btn" type="button" class="btn btn-white">8</button>
                            <button id="9-btn" type="button" class="btn btn-white">9</button>
                        </div>

                        <div class="btn-group" role="group" aria-label="Basic white" style="width: 75%;">
                            <button id="4-btn" type="button" class="btn btn-white">4</button>
                            <button id="5-btn" type="button" class="btn btn-white">5</button>
                            <button id="6-btn" type="button" class="btn btn-white">6</button>
                        </div>

                        <div class="btn-group" role="group" aria-label="Basic white" style="width: 75%;">
                            <button id="1-btn" type="button" class="btn btn-white">1</button>
                            <button id="2-btn" type="button" class="btn btn-white">2</button>
                            <button id="3-btn" type="button" class="btn btn-white">3</button>
                        </div>

                        <div class="btn-group" role="group" aria-label="Basic example" style="width: 75%;">
                            <button id="decimal-btn" type="button" class="btn btn-white">.</button>
                            <button id="0-btn" type="button" class="btn btn-white">0</button>
                            <button id="negative-btn" type="button" class="btn btn-white">+/-</button>
                        </div>

                    </div>

                    <div class="col-4">
                        <div class="btn-group-vertical">
                            <button id="division-btn" type="button" class="btn btn-light">/</button>
                            
                            <button id="multiply-btn" type="button" class="btn btn-light">x</button>
                            
                            <button id="substract-btn" type="button" class="btn btn-light">-</button>
                            
                            <button id="add-btn" type="button" class="btn btn-light">+</button>
                        </div>
                        <br>
                        <button id="result-btn" type="button" class="btn btn-light"
                            style="background-color: rgb(30, 235, 112); color: white;">=</button>
                    </div>
                </div>

            </div>
        </div>
        </div>

        <script>
            const ResetBtn = document.getElementById('reset-btn')
            const DeleteBtn = document.getElementById('delete-btn')
            const PercentBtn = document.getElementById('percent-btn')
            const Button1 = document.getElementById('1-btn')
            const Button2 = document.getElementById('2-btn')
            const Button3 = document.getElementById('3-btn')
            const Button4 = document.getElementById('4-btn')
            const Button5 = document.getElementById('5-btn')
            const Button6 = document.getElementById('6-btn')
            const Button7 = document.getElementById('7-btn')
            const Button8 = document.getElementById('8-btn')
            const Button9 = document.getElementById('9-btn')
            const Button0 = document.getElementById('0-btn')
            const DecimalBtn = document.getElementById('decimal-btn')
            const NegativeBtn = document.getElementById('negative-btn')
            const DivisionBtn = document.getElementById('division-btn')
            const MultiplyBtn = document.getElementById('multiply-btn')
            const SubstractBtn = document.getElementById('substract-btn')
            const AddBtn = document.getElementById('add-btn')
            const ResultBtn = document.getElementById('result-btn')

            const ResultText = document.getElementById('result-text')
            const CalcText = document.getElementById('calculation-text')
            let Operator = 0
            let SecondNumber = ''
            let Calculation = 0
            let CurrentOperation = 0
            let Result = 0

            

            function Reset (ResetBtn) {
                CalcText.innerText = ""
                ResultText.innerText = ""
                let Calculation = 0
                let Result = 0
                let SecondNumber = ''
                console.log("Second number is resetting:", SecondNumber)
            }
            ResetBtn.addEventListener('click', Reset)

            function Delete (DeleteBtn) {
                let Calculation = CalcText.innerText
                let SplitCalculation = Calculation.split ('')

                SplitCalculation;SplitCalculation.pop()
                Calculation = SplitCalculation

                
                Calculation = Calculation.join('')

                CalcText.innerText = Calculation
            }
            DeleteBtn.addEventListener('click', Delete)

            function CreateDecimal () {

            }

            function FindResult (ResultBtn) {
                let Calculation = CalcText.innerText
                let currentValue = 0
                let SplitCalculation = Calculation.split ('')

                SplitCalculation.forEach(function(currentValue, index, arr) {
                    console.log('INDEXï¼š', index, 'Current Value:', currentValue, 'Second number in the top is', SecondNumber)
                    if(index == 0) {
                        Result = currentValue
                    } else if (currentValue == '%') {

                    } else if(currentValue == '+') {
                        Operator = currentValue
                        // PreviousNumber = ''
                        console.log('Operator: ', Operator)
                    } else if(currentValue == '-' && isNaN(parseInt(SplitCalculation[index-1]))) {
                        Operator = currentValue
                        // PreviousNumber = ''
                        console.log('Operator: ', Operator)
                    } else if(currentValue == 'x') {
                        Operator = currentValue
                        // PreviousNumber = ''
                        console.log('Operator: ', Operator)
                    } else if(currentValue == '/') {
                        Operator = currentValue
                        // PreviousNumber = ''
                        console.log('Operator: ', Operator)
                    } 
                    
                    else {
                        
                            console.log('Second Number before reassignment:', SecondNumber, 'Current value before reassignment:', currentValue)
                            SecondNumber = String(SecondNumber) + currentValue
                            // console.log('Second Number is', SecondNumber)
                            // console.log('Previous Number is', PreviousNumber)

                        

                        // if (Operator != '+' && Operator!='-' && Operator!='x' && Operator!='/' && Operator!='%' && isNaN(parseInt(SplitCalculation[index+1]))) {
                        //     SecondNumber = String(SecondNumber) + currentValue
                        // }
                        
    
                        console.log (Operator == '+', isNaN(parseInt(SplitCalculation[index+1])), currentValue!='.')
                        // console.log ('Current')
                        if (Operator == '+' && isNaN(parseInt(SplitCalculation[index+1])) && currentValue!='.') {
                            console.log (SplitCalculation[index], 'Second number before check', SecondNumber)
                            SecondNumber = CheckPercentage (SplitCalculation[index+1], SecondNumber)
                            // SecondNumber = CheckDecimal (SplitCalculation[index+1], SecondNumber)
                            console.log ('Second number after check', SecondNumber)


                            Result = String(parseInt(Result) + parseFloat(SecondNumber))
                            SecondNumber = ''
                            console.log('Result is', Result)
                        } 
                        if (Operator == '-' && isNaN(parseInt(SplitCalculation[index+1]))) {
                            SecondNumber = CheckPercentage (SplitCalculation[index+1], SecondNumber)

                            Result = String(parseInt(Result) - parseFloat(SecondNumber))
                            SecondNumber = ''
                            console.log('Result is',Result)
                        } 
                        if (Operator == 'x' && isNaN(parseInt(SplitCalculation[index+1]))) {
                            console.log ('Check Percentage', CheckPercentage (SplitCalculation[index+1], parseInt(SecondNumber)), 'Second Number before Check percentage', SecondNumber)
                            SecondNumber = CheckPercentage (SplitCalculation[index+1], parseInt(SecondNumber))
                            console.log('Result', Result, 'Second Number', SecondNumber)
                            
                            Result = String(parseInt(Result) * parseFloat(SecondNumber))
                            console.log('This is second number after multiply', SecondNumber)
                            SecondNumber = ''
                    
                            console.log('Result is', Result)
                        } 
                        if (Operator == '/' && isNaN(parseInt(SplitCalculation[index+1]))) {
                            SecondNumber = CheckPercentage (SplitCalculation[index+1], SecondNumber)

                            Result = String(parseInt(Result) / parseFloat(SecondNumber))
                            SecondNumber = ''
                            console.log('Result is', Result)
                        }
                        // if (Operator == '.' && isNaN(parseInt(SplitCalculation[index+1]))) {
                        //     console.log("CurrentValue:", currentValue)
                        //     DecimalValue = parseFloat()
                        //     //Result = parseInt(Result + parseFloat(SecondNumber+currentValue))
                        //     SecondNumber = ''
                        //     console.log(Result)
                        // }
                    }
                })
                ResultText.innerText = Result
            }
            ResultBtn.addEventListener('click', FindResult)

            function CheckPercentage (CValue, SNumber) {
                if (CValue == '%') {
                    console.log ('Second number before percentage', SNumber)
                    SNumber = parseInt(SNumber)/100
                }
                return SNumber
            }

            function CheckDecimal (CValue,SNumber) {
                if (CValue == '.') {
                    console.log ('Second number before decimal', SNumber)
                    SNumber = parseFloat(SNumber)
                }
                return SNumber
            }

            function ConvertNegative (NegativeBtn) {
                let Calculation = CalcText.innerText
                let SeperateNumber = Calculation.split(/[+-]|[x/]/g)
                console.log('SeperateNumber before convert negative:', SeperateNumber)
                console.log('last seperatenumber index before convert negative', SeperateNumber[SeperateNumber.length-1])


                SeperateNumber[SeperateNumber.length-1] = String(parseFloat(SeperateNumber[SeperateNumber.length-1]) * -1)
                console.log('Seperatenumber after convert negative', SeperateNumber, 'calculation after convert negative', Calculation)

                SplitCalculation = Calculation.split('')
                console.log (SplitCalculation)

                console.log(SplitCalculation.slice(0, SplitCalculation.length-1))
                Calculation = SplitCalculation.slice(0, SplitCalculation.length-1)

                Calculation = Calculation.join('')

                console.log('Calculation', Calculation)
                CalcText.innerText = Calculation + SeperateNumber[SeperateNumber.length-1]
                

                // CalcText.innerText = Calculation.pop + SeperateNumber[SeperateNumber.length-1]
            }
            NegativeBtn.addEventListener('click', ConvertNegative)

            function clickbutton1 (Button1) {
                CalcText.innerText = CalcText.innerText + 1
            }
            Button1.addEventListener('click', clickbutton1)

            function clickbutton2 (Button2) {
                CalcText.innerText = CalcText.innerText + 2
            }
            Button2.addEventListener('click', clickbutton2)

            function clickbutton3 (Button3) {
                CalcText.innerText = CalcText.innerText + 3
            }
            Button3.addEventListener('click', clickbutton3)

            function clickbutton4 (Button4) {
                CalcText.innerText = CalcText.innerText + 4
            }
            Button4.addEventListener('click', clickbutton4)

            function clickbutton5 (Button5) {
                CalcText.innerText = CalcText.innerText + 5
            }
            Button5.addEventListener('click', clickbutton5)

            function clickbutton6 (Button6) {
                CalcText.innerText = CalcText.innerText + 6
            }
            Button6.addEventListener('click', clickbutton6)

            function clickbutton7 (Button7) {
                CalcText.innerText = CalcText.innerText + 7
                console.log('Second Number in Button 7 is', SecondNumber)
            }
            Button7.addEventListener('click', clickbutton7)

            function clickbutton8 (Button8) {
                CalcText.innerText = CalcText.innerText + 8
            }
            Button8.addEventListener('click', clickbutton8)

            function clickbutton9 (Button9) {
                CalcText.innerText = CalcText.innerText + 9
            }
            Button9.addEventListener('click', clickbutton9)

            function clickbutton0 (Button0) {
                CalcText.innerText = CalcText.innerText + 0
            }
            Button0.addEventListener('click', clickbutton0)

            function Addition (AddBtn) {
                CalcText.innerText = CalcText.innerText + "+"
                
            }
            AddBtn.addEventListener('click', Addition)

            function Substraction (SubstractBtn) {
                CalcText.innerText = CalcText.innerText + "-"
            }
            SubstractBtn.addEventListener('click', Substraction)

            function Multiplication (MultiplyBtn) {
                CalcText.innerText = CalcText.innerText + "x"
            }
            MultiplyBtn.addEventListener('click', Multiplication)

            function Division (DivisionBtn) {
                CalcText.innerText = CalcText.innerText + "/"
            }
            DivisionBtn.addEventListener('click', Division)

            function Percentage (PercentBtn) {
                CalcText.innerText = CalcText.innerText + "%"
            }
            PercentBtn.addEventListener('click', Percentage)

            function Decimal (DecimalBtn) {
                CalcText.innerText = CalcText.innerText + "."
            }
            DecimalBtn.addEventListener('click', Decimal)




            /*function clickbutton (button) { 
                const convertinput1 = parseInt(input1.value)
                const convertinput2 = parseInt(input2.value)
                console.log(convertinput1)
                console.log(input1)
                text.innerText = "Hasil:" + String(convertinput1 + convertinput2)
            }
            button.addEventListener('click', clickbutton)*/

        </script>
        
    </body>
</html>
